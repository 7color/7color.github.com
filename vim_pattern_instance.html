<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Vim正则实例 - 七彩映像.Wiki</title>
    <meta name="Keywords" content="7color,seven color,七彩映像,vim,php,js" />
    <meta name="Description" content="记录我的所学所得" />
    <link href="images/favicon.ico" rel="SHORTCUT ICON" type="image/x-icon" />
    <link rel="Stylesheet" type="text/css" href="styles/base.css" />
    <link rel="Stylesheet" type="text/css" href="styles/7color.css" />
    <script type="text/javascript">var root_path = '';</script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/7color.js"></script>
</head>
<body>
<div id="header">
     <div id="menu">
         <div id="menu_center">
             <ul>
                 <li class="page_item"><a href="/"> Home</a></li>	
                 <li class="page_item"><a href="diary/"> Diary</a></li>	
                 <li class="page_item"><a href="todo/"> Todo</a></li>	
                 <li class="page_item"><a href="#"> About</a></li>	
                 <li><div class="rss"><a href="https://github.com/7color/7color.github.com/commits/master.atom">RSS</a></div></li>
                 <li class="logo"><a href="http://t.qq.com/sevencolor" class="logo_a"> 七彩映像(@7color)</a></li>
             </ul>
         </div>
         <div id="search">
            <form method="get" action="search.html" id="search-input" >
                <input type="text" name="q" value="" size="13" id="search-input-input"><input type="submit" id="search-submit" name="" value="OK">
            </form>
         </div>
     </div>
</div>
<div id="container">
    <div id="content">
<h1 id="toc_1" class="justcenter">Vim正则实例</h1>
<blockquote>
<strong>须转义字符</strong>: <code>.*[]^%/\?~$</code><br/>
<strong>查看帮助</strong>: <code>:h pattern.txt</code>
</blockquote>
<h2 id="toc_1.1">实例</h2>
<ol>
<li>
删除包含关键字(help)的行
<pre>
  :g/help/d
  :g!/help/d    !表示不包含
</pre>
</li>
<li>
交换奇偶行
<pre>
  :g/^/+1m-1
  -------------------
  g/^/ 匹配所有行
  +1   定位到下一行
  m-1 移到上面去
</pre>
</li>
<li>
统计字数
<pre>
  visual模式下, 选中要查字数的片段后,按g + C-g
</pre>
</li>
<li>
居中光标所在行
<pre>
  zz : 将当前行置于屏幕中间
  zt : 将当前行置于屏幕顶端
  zb: 将当前行置于屏幕底端
</pre>
</li>
<li>
非贪婪匹配
<pre>
  默认贪婪匹配到行末：/&lt;a.*&gt; 
  使用非贪婪匹配本标签：/&lt;a.\{-}&gt;
</pre>
</li>
<li>
多行空行替换为一个空行
<pre>
  %s/\(^$\n\)\+/\r/g
  g/^\s*$/,/\S/-j|s/.*//   参考:http://www.commandlinefu.com/commands/view/3052/compress-blank-lines-in-vim
  [相关参考:使用vim的^$\n不能替换空行（全角字符问题）]
</pre>
</li>
<li>
刪除沒有內容的空行
<pre>
  g/^$/d
</pre>
</li>
<li>
刪除包含有空格組成的空行
<pre>
  g/^\s*$/d
</pre>
</li>
<li>
除以空格或tab開頭到結尾的空行
<pre>
  g/^[ |\t]*$/d
</pre>
</li>
<li>
正则实例
<pre>
  :%s/_\([a-z]\)_\(.*\)/_\U\1\l_\2/g

  :%s/\(Wa_.*\)/\1,,,/g 
  :%s/\(Ar_.*\)/,\1,,/g 
  :%s/\(So_.*\)/,,\1,/g 
  :%s/\(Cl_.*\)/,,,\1/g 
</pre>
</li>
<li>
单行id补齐其它列
<pre>
  :%s/\(\d\+\),$/\1,,,,/g  
</pre>
</li>
<li>
删除空数据的行
<pre>
  :g/\d\+,,,,/d 
</pre>
</li>
<li>
删除单行只有一个逗号的行
<pre>
  :g/^\d\+,[a-zA-Z0-9_\- ]*$/d
</pre>
</li>
<li>
删除空行
<pre>
  :g/^$/d
</pre>
</li>
<li>
大小写切换(v选中的文字可以用u切换到小写，U切换到大写，~在大小写之间切换)
<pre>
  VIm
  HEllo
  WOrld
  NIce
  GOod
  ME
  TOo
  :%s/^\(\w\{2\}\)\(.*\)/\U\1\L\2/g  
</pre>
</li>
</ol>
<h2 id="toc_1.2">资源链接</h2>
<ul>
<li>
<a href="http://easwy.com">http://easwy.com</a> 易水博客
</li>
<li>
<a href="http://blog.csdn.net/easwy/default.aspx?PageNumber=3">http://blog.csdn.net/easwy/default.aspx?PageNumber=3</a>  易水CSDN
</li>
<li>
<a href="http://www.rayninfo.co.uk/vimtips.html">http://www.rayninfo.co.uk/vimtips.html</a>  vimtips
</li>
</ul>
    </div>
</div>
<div id="footer">
    <div id="footer-3rd">
        <div id="footer-text">
            Copyright &copy;2010&nbsp;七彩映像(@7color)&nbsp;&nbsp;|&nbsp;&nbsp;Powered By <a href="https://code.google.com/p/vimwiki">VimWiki</a>,&nbsp;&nbsp;<a href="https://github.com">GitHub</a>
        </div>
    </div>
</div>
<div id="sidecatalog" style="position:absolute;display:none;">
    <div class="sidebar" id="sidebar"></div>
    <a class="gotop" href="#" id="gotop" title="返回顶部"></a>
</div>
<div id="side-catalog-content" style="position:absolute;display:none;"></div>
</body>
</html>
